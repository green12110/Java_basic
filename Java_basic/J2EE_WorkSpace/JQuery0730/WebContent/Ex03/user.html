<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="../jquery/jquery-1.7.2.js"></script>
</head>
<body>
	<center>
		<br>
		<br> 添加用户:<br>
		<br> 姓名: <input type="text" name="name" id="name" />&nbsp;&nbsp;
		email: <input type="text" name="email" id="email" />&nbsp;&nbsp; 电话:
		<input type="text" name="tel" id="tel" /><br>
		<br>
		<button id="addUser">提交</button>
		<br>
		<br>
		<hr>
		<br>
		<br>
		<table id="usertable" border="1" cellpadding="5" cellspacing=0>
			<tbody>
				<tr>
					<th>姓名</th>
					<th>email</th>
					<th>电话</th>
					<th>&nbsp;</th>
				</tr>
				<tr>
					<td>Tom</td>
					<td>tom@tom.com</td>
					<td>5000</td>
					<td><a href="deleteEmp?id=Tom">Delete</a></td>
				</tr>
				<tr>
					<td>Jerry</td>
					<td>jerry@sohu.com</td>
					<td>8000</td>
					<td><a href="deleteEmp?id=Jerry">Delete</a></td>
				</tr>
			</tbody>
		</table>
	</center>
</body>
<script type="text/javascript">
	$(window).load(function() {
		$("#addUser").click(function() {
			//获取用户名、email、电话
			var $name = $("#name").val();
			var $email = $("#email").val();
			var $tel = $("#tel").val();
			alert($name);
			//创建tr节点
			var $tr = $("<tr></tr>");
			//创建td节点，并增加文本
			var $td_name = $("<td></td>");
			$td_name.text($name);
			var $td_email = $("<td></td>");
			$td_email.text($email);
			var $td_tel = $("<td></td>");
			$td_tel.text($tel);

			//创建删除td，及下面的连接节点
			var $td_link = $("<td></td>");
			var $a = $("<a></a>");
			$a.attr("href", "deleteEmp?id=" + $name);
			$a.text("删除");
			$td_link.append($a);

			//将4个td节点放在tr下面
			$tr.append($td_name);
			$tr.append($td_email);
			$tr.append($td_tel);
			$tr.append($td_link);
			//tr放入table下面
			$("#usertable").append($tr);

			$a.click(function() {
				return delTr($a);
			});

		});
	});

	function delTr($a) {
		var name = $a.parent().parent().children().eq(0).text();
		//alert("确定要删除："+name+"这一行吗？");
		var res = window.confirm("确定要删除：" + name + "这一行吗？");
		if (!res) {
			return false;
		}
        //删除操作
		$a.parent().parent().empty();

		return false;
	}
</script>
</html>